
## **建筑****平面图生成_****文生图调研**

### 1. **Civitai 生成模型社区**

Civitai社区是全球最大的AI绘画模型分享社区，有关于平面建筑的AI模型都是类似于下图风格的经过训练的lora模型：

![](file:///C:\Users\plote\AppData\Local\Temp\ksohtml32904\wps1.jpg) 

  
关于小区平面图的风格如下：

![](file:///C:\Users\plote\AppData\Local\Temp\ksohtml32904\wps2.jpg) 

总的来说，Civitai社区里可能并没有和项目需要的风格非常相似的小区平面图。此外，关于建筑设计场景下的生成模型大多数都是根据单线初稿生成彩色平面图，如下所示：

![](file:///C:\Users\plote\AppData\Local\Temp\ksohtml32904\wps3.jpg) 

![](file:///C:\Users\plote\AppData\Local\Temp\ksohtml32904\wps4.jpg) 

![](file:///C:\Users\plote\AppData\Local\Temp\ksohtml32904\wps5.jpg) 

但是仅根据文本提示词来生成平面图的模型很少见，大部分都是根据轮廓进行风格色彩上的丰富，或者生成类似风格的建筑图片。

### 2. **文献调研**

这种类型的文献感觉还是比较少，目前只找到和项目相关的两篇文献。

文献1：《一种自动生成住宅建筑平面的方法》

**主要内容**：  
这篇文献主要讨论了一种自动生成住宅建筑平面的方法及装置。

（1）技术领域

本发明涉及住宅建筑平面生成技术，尤其是自动生成住宅建筑平面的方法及装置。

（2）背景技术

传统的住宅建筑平面设计主要依赖于人工使用CAD工具手绘，存在速度慢、出错率高、修改成本高等问题。因此，亟需一种高效、准确、可批量化的住宅建筑平面生成方案。

（3）发明内容

本发明提出了一种基于对抗生成网络（GAN）的自动生成住宅建筑平面的方法和装置，主要步骤包括：

1）获取原始训练数据：获取各个区域范围内住宅建筑的标准平面图，分析得到住宅面积、户型面积、户型布局、户型轮廓及住宅结构尺寸信息。

2）训练对抗生成网络模型：结合原始训练数据及其所在的区域范围，训练得到住宅建筑平面对抗生成网络模型。

3）生成平面户型模型：接收目标住宅建筑的区域、户型面积、户型轮廓及布局，根据对抗生成网络模型生成带功能区域的平面户型模型。

4）去噪和规整处理：对平面户型模型进行去噪、规整处理，得到几何图形意义上的住宅建筑平面。

（4）装置结构

该装置包括训练数据获取模块、模型训练模块及住宅建筑平面生成模块，还可以包括评估模块及评估模型训练模块，用于评估生成的平面图是否符合规范要求。

**模型****输入和输出****：**

（1）输入

1）户型面积：目标住宅建筑的面积。

2）户型外轮廓：目标住宅建筑的外形轮廓。

3）户型布局：目标住宅建筑的房间布局，例如几房几厅。

4）目标区域：住宅建筑所在的地理区域，以确保生成的平面图符合当地规范。

（2）输出

1）带功能区域的平面户型模型：根据输入生成的包含各功能区域的初步平面图。

2）去噪和规整后的几何图形意义上的住宅建筑平面：经过去噪和规整处理后的最终平面图，符合几何图形标准和用户需求。

该方法能够根据输入的参数生成符合用户需求的住宅建筑平面图，并提供高效、准确的设计方案。

文献2：《DStruct2Design：Data and Benchmarks for Data Structure Driven Generative Floor Plan Design》

**主要内容**：

主要探讨了基于数据结构的生成平面图设计。

（1）研究背景

   - 当前的生成模型在生成图像方面取得了显著成果，但在平面图生成中，数值属性往往比美观更重要。

   - 现有的方法和数据集不能很好地支持数值约束，例如房间大小等。

（2）主要贡献

   - 数据集构建：构建了一个新的数据集，将两个人气图像平面图数据集（RPLAN和ProcTHOR-10k）转化为数据结构格式。

   - 任务探索：探讨了在部分或全部约束下生成平面图的任务，并设计了一系列评估指标和基准，评估生成样本如何遵守这些约束。

   - 基线模型：通过微调大型语言模型（如Llama3），验证了使用平面图数据结构进行生成的可行性。

（3）方法与实现

   - 数据结构：设计了基于JSON的数据结构，包含平面图的数值属性和每个房间的多边形定义，以确保生成结果的准确性和评估的可行性。

   - 训练与评估：使用新的数据集训练了多个模型变体，并在不同约束下生成平面图，评估其自一致性和提示一致性。

（4）实验结果：

   - 生成质量：在数值一致性和遵守输入约束方面，模型表现良好，但在处理重叠房间布局时存在一定问题。

   - 与现有方法的比较：在一些基准测试中，新方法在生成结果的数值准确性和遵从约束方面具有竞争力，但在处理复杂图结构约束时仍有改进空间。

总体而言，该文献通过构建新的数据集和设计新的基准测试，推动了平面图生成领域的发展，并验证了基于数据结构的生成方法的可行性和有效性。

**模型****输入和输出****：**

（1）输入（Input）

输入包括两种主要类型的信息：

1）数值约束（Numerical Constraints）：

   - 包括整个平面图的总面积、房间的数量和类型、各个房间的面积等数值信息。例如：

     ```json

     {

       "room_count": 4,

       "total_area": 146.8,

       "rooms": [

         {"area": 41.3, "id": "room|4", "room_type": "Bedroom"},

         {"area": 27.5, "id": "room|7", "room_type": "LivingRoom"}

       ]

     }

     ```

2）图形约束（Graph Constraints）：

   - 包括房间之间的邻接关系，这些关系通常表示为房间对。例如：

     ```json

     [

       ("Bedroom/'room|4'", "Bathroom/'room|5'"),

       ("Bedroom/'room|4'", "Kitchen/'room|6'"),

       ("Bedroom/'room|4'", "LivingRoom/'room|7'"),

       ("Bathroom/'room|5'", "Kitchen/'room|6'"),

       ("Bathroom/'room|5'", "LivingRoom/'room|7'"),

       ("Kitchen/'room|6'", "LivingRoom/'room|7'")

     ]

     ```

（2）输出（Output）

输出是生成的平面图，表示为包含详细数值信息和多边形坐标的JSON结构。例如：

```json

{

  "room_count": 4,

  "total_area": 146.8,

  "room_types": ["Bedroom", "LivingRoom", "Bathroom", "Kitchen"],

  "rooms": [

    {

      "id": "room|4",

      "room_type": "Bedroom",

      "area": 41.3,

      "floor_polygon": [

        {"x": 0, "y": 0},

        {"x": 5, "y": 0},

        {"x": 5, "y": 5},

        {"x": 0, "y": 5}

      ],

      "is_regular": true,

      "height": 5,

      "width": 5

    },

    {

      "id": "room|7",

      "room_type": "LivingRoom",

      "area": 27.5,

      "floor_polygon": [

        {"x": 5, "y": 0},

        {"x": 10, "y": 0},

        {"x": 10, "y": 5},

        {"x": 5, "y": 5}

      ],

      "is_regular": true,

      "height": 5,

      "width": 5

    }

    // 其他房间信息...

  ],

  "edges": [

    {"room1": "room|4", "room2": "room|5"},

    {"room1": "room|4", "room2": "room|6"},

    {"room1": "room|4", "room2": "room|7"},

    {"room1": "room|5", "room2": "room|6"},

    {"room1": "room|5", "room2": "room|7"},

    {"room1": "room|6", "room2": "room|7"}

  ]

}

```

即：

- 输入：包括数值约束（房间数量、总面积、各房间面积等）和图形约束（房间之间的邻接关系）。

- 输出：生成的平面图，表示为包含详细数值信息和多边形坐标的JSON结构，能够准确描述各个房间的布局和连接关系。

### 3. **总结**

经调研，目前关于房地产建筑平面图的生成模型比较稀缺，感觉该场景下的生成模型需要经过特定的训练。也有一些相关的文献，但其实和文生图的关系不大，可以作为方法参考。